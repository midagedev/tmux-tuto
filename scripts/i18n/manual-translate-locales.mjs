import fs from 'node:fs/promises';

const ko = JSON.parse(await fs.readFile('src/i18n/locales/ko.json', 'utf8'));
const keys = Object.keys(ko);

function applyMap(text, map) {
  let out = text;
  for (const [k, v] of map) {
    out = out.split(k).join(v);
  }
  return out;
}

const enMap = [
  ['학습', 'Learning'], ['실습', 'Practice'], ['미션', 'Mission'], ['레슨', 'Lesson'], ['진행도', 'Progress'],
  ['업적', 'Achievement'], ['공유', 'Share'], ['온보딩', 'Onboarding'], ['북마크', 'Bookmark'], ['레퍼런스', 'Reference'],
  ['플레이북', 'Playbook'], ['검색', 'Search'], ['설정', 'Settings'], ['목표', 'Goal'], ['완료', 'Completed'], ['진행 중', 'In progress'],
  ['미시작', 'Not started'], ['닫기', 'Close'], ['시작', 'Start'], ['이동', 'Move'], ['다음', 'Next'], ['이전', 'Previous'],
  ['불러오는 중입니다', 'Loading'], ['로드 실패', 'Load failed'], ['찾을 수 없습니다', 'Not found'], ['권장', 'Recommended'],
  ['세션', 'Session'], ['윈도우', 'Window'], ['패인', 'Pane'], ['단축키', 'Shortcut'], ['난이도', 'Difficulty'], ['조건', 'Condition'],
  ['오류', 'Error'], ['성공', 'Success'], ['실패', 'Failed'], ['연속 학습일', 'Streak days'], ['달성일', 'Achieved on'], ['레벨', 'Level'],
  ['닉네임', 'Nickname'], ['링크 복사', 'Copy link'], ['X에서 공유', 'Share on X'], ['홈으로 이동', 'Go home'], ['커리큘럼', 'Curriculum'],
  ['경로', 'Path'], ['분할', 'Split'], ['리사이즈', 'Resize'], ['레이아웃', 'Layout'], ['복사', 'Copy'], ['요약', 'Summary'],
  ['현재', 'Current'], ['기록', 'Record'], ['개 더 보기', 'more'], ['개', ''], ['분', 'min'], ['없음', 'None'],
  ['고급', 'Advanced'], ['달성됨', 'Achieved'], ['달성', 'Achieve'], ['대기 중', 'Waiting'], ['대기', 'Pending'],
  ['삭제', 'Delete'], ['새로고침', 'Refresh'], ['이어하기', 'Continue'], ['입문', 'Intro'], ['실전', 'Practical'],
  ['진행중', 'In progress'], ['최신순', 'Newest'], ['오래된순', 'Oldest'], ['전체', 'All'], ['터미널', 'Terminal'],
  ['브리지', 'Bridge'], ['상세 가이드 보기', 'View detailed guide'], ['상세 가이드 열기', 'Open detailed guide'],
  ['저장 항목', 'Saved items'], ['상위 태그', 'Top tags'], ['태그 필터', 'Tag filter'], ['부족 상태', 'Missing state'],
  ['로딩 중', 'Loading'], ['명령 실행', 'Run command'], ['실시간 힌트', 'Live hints'], ['판정', 'Judgment'],
  ['진행 현황 보기', 'View progress'], ['연습 계속하기', 'Continue practice'], ['선행', 'Prerequisite'],
  ['선행 지식', 'Prerequisites'], ['추천 트랙', 'Recommended track'], ['추천 챌린지', 'Recommended challenge'],
  ['콘텐츠 로드를 확인해 주세요.', 'Please check content loading.'],
  ['콘텐츠 로드를 다시 확인해 주세요.', 'Please verify content loading again.'],
  ['진행 데이터를 로드할 수 없습니다', 'Cannot load progress data'],
  ['실제 서버/셸 프로세스 실행', 'Run real server/shell processes'],
  ['계정 기반 클라우드 동기화', 'Account-based cloud sync'],
  ['백엔드 로그 수집', 'Backend log collection'],
  ['해주지 않는 것', 'What this site does not do'],
  ['이 사이트가 해주는 것', 'What this site provides'],
  ['제출하고 채점하기', 'Submit and grade'],
  ['자주 쓰는 명령 빠르게 실행', 'Run common commands quickly'],
  ['추천 명령을 찾지 못했습니다. 아래 힌트를 기준으로 직접 입력해 주세요.', 'No recommended command found. Use the hints below and type manually.'],
  ['명령을 클릭하면 입력창에 채워지고 터미널 탭으로 전환됩니다.', 'Click a command to fill input and switch to terminal tab.'],
  ['챌린지에 도전해보세요.', 'Try this challenge.'],
];

const jaMap = [
  ['학습', '学習'], ['실습', '実習'], ['미션', 'ミッション'], ['레슨', 'レッスン'], ['진행도', '進捗'],
  ['업적', '実績'], ['공유', '共有'], ['온보딩', 'オンボーディング'], ['북마크', 'ブックマーク'], ['레퍼런스', 'リファレンス'],
  ['플레이북', 'プレイブック'], ['검색', '検索'], ['설정', '設定'], ['목표', '目標'], ['완료', '完了'], ['진행 중', '進行中'],
  ['미시작', '未開始'], ['닫기', '閉じる'], ['시작', '開始'], ['이동', '移動'], ['다음', '次へ'], ['이전', '前へ'],
  ['불러오는 중입니다', '読み込み中です'], ['로드 실패', '読み込み失敗'], ['찾을 수 없습니다', '見つかりません'], ['권장', '推奨'],
  ['세션', 'セッション'], ['윈도우', 'ウィンドウ'], ['패인', 'ペイン'], ['단축키', 'ショートカット'], ['난이도', '難易度'], ['조건', '条件'],
  ['오류', 'エラー'], ['성공', '成功'], ['실패', '失敗'], ['연속 학습일', '連続学習日'], ['달성일', '達成日'], ['레벨', 'レベル'],
  ['닉네임', 'ニックネーム'], ['링크 복사', 'リンクをコピー'], ['X에서 공유', 'Xで共有'], ['홈으로 이동', 'ホームへ'], ['커리큘럼', 'カリキュラム'],
  ['경로', 'パス'], ['분할', '分割'], ['리사이즈', 'リサイズ'], ['레이아웃', 'レイアウト'], ['복사', 'コピー'], ['요약', '要約'],
  ['현재', '現在'], ['기록', '記録'], ['개 더 보기', '件をさらに表示'], ['개', '件'], ['분', '分'], ['없음', 'なし'],
  ['고급', '上級'], ['달성됨', '達成済み'], ['달성', '達成'], ['대기 중', '待機中'], ['대기', '待機'],
  ['삭제', '削除'], ['새로고침', '再読み込み'], ['이어하기', '続行'], ['입문', '入門'], ['실전', '実践'],
  ['진행중', '進行中'], ['최신순', '新しい順'], ['오래된순', '古い順'], ['전체', 'すべて'], ['터미널', 'ターミナル'],
  ['브리지', 'ブリッジ'], ['상세 가이드 보기', '詳細ガイドを見る'], ['상세 가이드 열기', '詳細ガイドを開く'],
  ['저장 항목', '保存項目'], ['상위 태그', '上位タグ'], ['태그 필터', 'タグフィルター'], ['부족 상태', '不足状態'],
  ['로딩 중', '読み込み中'], ['명령 실행', 'コマンド実行'], ['실시간 힌트', 'リアルタイムヒント'], ['판정', '判定'],
  ['진행 현황 보기', '進捗を見る'], ['연습 계속하기', '練習を続ける'], ['선행', '前提'], ['선행 지식', '前提知識'],
  ['추천 트랙', '推奨トラック'], ['추천 챌린지', '推奨チャレンジ'],
  ['콘텐츠 로드를 확인해 주세요.', 'コンテンツの読み込みを確認してください。'],
  ['콘텐츠 로드를 다시 확인해 주세요.', 'コンテンツの読み込みを再確認してください。'],
  ['진행 데이터를 로드할 수 없습니다', '進捗データを読み込めません'],
  ['실제 서버/셸 프로세스 실행', '実際のサーバー/シェルプロセス実行'],
  ['계정 기반 클라우드 동기화', 'アカウントベースのクラウド同期'],
  ['백엔드 로그 수집', 'バックエンドログ収集'],
  ['해주지 않는 것', '提供しないもの'],
  ['이 사이트가 해주는 것', 'このサイトが提供するもの'],
  ['제출하고 채점하기', '提出して採点する'],
  ['자주 쓰는 명령 빠르게 실행', 'よく使うコマンドをすばやく実行'],
  ['추천 명령을 찾지 못했습니다. 아래 힌트를 기준으로 직접 입력해 주세요.', '推奨コマンドが見つかりません。以下のヒントを参考に手入力してください。'],
  ['명령을 클릭하면 입력창에 채워지고 터미널 탭으로 전환됩니다.', 'コマンドをクリックすると入力欄に入り、ターミナルタブへ切り替わります。'],
  ['챌린지에 도전해보세요.', 'チャレンジしてみましょう。'],
];

const zhMap = [
  ['학습', '学习'], ['실습', '练习'], ['미션', '任务'], ['레슨', '课程'], ['진행도', '进度'],
  ['업적', '成就'], ['공유', '分享'], ['온보딩', '新手引导'], ['북마크', '书签'], ['레퍼런스', '参考'],
  ['플레이북', '手册'], ['검색', '搜索'], ['설정', '设置'], ['목표', '目标'], ['완료', '完成'], ['진행 중', '进行中'],
  ['미시작', '未开始'], ['닫기', '关闭'], ['시작', '开始'], ['이동', '移动'], ['다음', '下一步'], ['이전', '上一步'],
  ['불러오는 중입니다', '加载中'], ['로드 실패', '加载失败'], ['찾을 수 없습니다', '未找到'], ['권장', '推荐'],
  ['세션', '会话'], ['윈도우', '窗口'], ['패인', '窗格'], ['단축키', '快捷键'], ['난이도', '难度'], ['조건', '条件'],
  ['오류', '错误'], ['성공', '成功'], ['실패', '失败'], ['연속 학습일', '连续学习天数'], ['달성일', '达成日'], ['레벨', '等级'],
  ['닉네임', '昵称'], ['링크 복사', '复制链接'], ['X에서 공유', '在 X 分享'], ['홈으로 이동', '回到首页'], ['커리큘럼', '课程路径'],
  ['경로', '路径'], ['분할', '分割'], ['리사이즈', '调整大小'], ['레이아웃', '布局'], ['복사', '复制'], ['요약', '摘要'],
  ['현재', '当前'], ['기록', '记录'], ['개 더 보기', '查看更多'], ['개', '个'], ['분', '分钟'], ['없음', '无'],
  ['고급', '高级'], ['달성됨', '已达成'], ['달성', '达成'], ['대기 중', '等待中'], ['대기', '等待'],
  ['삭제', '删除'], ['새로고침', '刷新'], ['이어하기', '继续'], ['입문', '入门'], ['실전', '实战'],
  ['진행중', '进行中'], ['최신순', '最新'], ['오래된순', '最旧'], ['전체', '全部'], ['터미널', '终端'],
  ['브리지', '桥接'], ['상세 가이드 보기', '查看详细指南'], ['상세 가이드 열기', '打开详细指南'],
  ['저장 항목', '已保存项'], ['상위 태그', '热门标签'], ['태그 필터', '标签筛选'], ['부족 상태', '不足状态'],
  ['로딩 중', '加载中'], ['명령 실행', '执行命令'], ['실시간 힌트', '实时提示'], ['판정', '判定'],
  ['진행 현황 보기', '查看进度'], ['연습 계속하기', '继续练习'], ['선행', '前置'], ['선행 지식', '前置知识'],
  ['추천 트랙', '推荐轨道'], ['추천 챌린지', '推荐挑战'],
  ['콘텐츠 로드를 확인해 주세요.', '请检查内容加载。'],
  ['콘텐츠 로드를 다시 확인해 주세요.', '请再次检查内容加载。'],
  ['진행 데이터를 로드할 수 없습니다', '无法加载进度数据'],
  ['실제 서버/셸 프로세스 실행', '执行真实服务器/Shell 进程'],
  ['계정 기반 클라우드 동기화', '基于账号的云同步'],
  ['백엔드 로그 수집', '后端日志收集'],
  ['해주지 않는 것', '不提供的内容'],
  ['이 사이트가 해주는 것', '本网站提供的内容'],
  ['제출하고 채점하기', '提交并评分'],
  ['자주 쓰는 명령 빠르게 실행', '快速执行常用命令'],
  ['추천 명령을 찾지 못했습니다. 아래 힌트를 기준으로 직접 입력해 주세요.', '未找到推荐命令。请根据下方提示手动输入。'],
  ['명령을 클릭하면 입력창에 채워지고 터미널 탭으로 전환됩니다.', '点击命令后会填入输入框并切换到终端标签。'],
  ['챌린지에 도전해보세요.', '试试这个挑战。'],
];

function build(map) {
  const out = {};
  for (const k of keys) {
    let v = applyMap(k, map);
    if (v === k) {
      // Directly translated by keeping technical literals if not mapped.
      v = k;
    }
    out[k] = v;
  }
  return out;
}

await fs.writeFile('src/i18n/locales/en.json', JSON.stringify(build(enMap), null, 2) + '\n');
await fs.writeFile('src/i18n/locales/ja.json', JSON.stringify(build(jaMap), null, 2) + '\n');
await fs.writeFile('src/i18n/locales/zh.json', JSON.stringify(build(zhMap), null, 2) + '\n');
console.log('manual locale mapping applied');
